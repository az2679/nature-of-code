import"./modulepreload-polyfill-3cfb730f.js";let s=[],d,n,h,c,i=[],f,w;new p5(o=>{o.setup=()=>{o.createCanvas(windowWidth,windowHeight),o.background(246,238,227),o.noStroke(),f=o.color(248,148,143),w=o.color(203,190,250);for(let e=0;e<50;e++){let t=p5.Vector.random2D(),l=t.copy();l.setMag(random(5,10)),t.setMag(random(150,200)),l.rotate(PI/2);let r=random(10,15);s[e]=new Mover(t.x,t.y,l.x,l.y,r)}n=new Mover(0,0,0,0,500),h=new Mover(-150,-150,0,0,5e3),c=new Mover(150,150,0,0,5e3)},o.draw=()=>{o.clear(),o.background(160);let e=new Rectangle(0,0,width,height);d=Quadtree.create(e,8);for(let t of s){let l=new Point(t.pos.x,t.pos.y,t);d.insert(l)}o.strokeWeight(20),o.stroke(255);for(let t=0;t<i.length;t++)o.point(i[t].pos.x,i[t].pos.y);o.strokeWeight(1);for(let t of s){a(t,d),n.attract(t);for(let l=0;l<i.length;l++)i[l].attract(t)}o.noStroke(),o.push(),o.translate(width/2,height/2),o.fill(0),o.ellipse(n.pos.x,n.pos.y,20);for(let t=0;t<s.length;t++){o.lerpColor(f,w,t/s.length);let l=o.dist(s[t].pos.x,s[t].pos.y,n.pos.x,n.pos.y),r=o.map(l,0,width*.15,0,255),y=o.map(l,0,width*.2,0,1),u=o.lerpColor(f,w,y);o.fill(u);let g=o.createVector(0,.2);p5.Vector.mult(g,s[t].mass),s[t].intersect(h)?o.fill(r):s[t].intersect(c)?o.fill(o.map(l,0,width*.4,255,0)):o.fill(u),s[t].update(),s[t].show()}o.stroke(255),o.noFill(),h.show(),c.show(),o.pop()},o.setup=()=>{let e=new Mover(mouseX,mouseY,0,0,100);i.push(e),e.intersect(n)};function a(e,t){if(o.dist(e.pos.x,e.pos.y,t.boundary.x,t.boundary.y)<25){if(t.points)for(let r of t.points)e!=r.userData&&r.userData.attract(e)}else t.points&&new Mover(t.boundary.x,t.boundary.y,0,0,e.mass*t.points.length).attract(e);t.divided&&(a(e,t.northeast),a(e,t.northwest),a(e,t.southeast),a(e,t.southwest))}});
